drop table vendedor;
drop table cliente;
drop table pessoa;
drop table pedido;


-- Criação da tabela CLIENTE
CREATE TABLE CLIENTE (
    CPF VARCHAR2(11) NOT NULL PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    ENDERECO VARCHAR2(200),
    CIDADE VARCHAR2(100),
    UF CHAR(2),
    CEP VARCHAR2(8),
    DDD VARCHAR2(2),
    TELEFONE VARCHAR2(9),
    LIMITE_CREDITO NUMBER(9,2) NOT NULL,
    LIMITE_DISPONIVEL NUMBER(9,2) NOT NULL
);

-- Criação da tabela VENDEDOR
CREATE TABLE VENDEDOR (
    CPF VARCHAR2(11) NOT NULL PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    ENDERECO VARCHAR2(200),
    CIDADE VARCHAR2(100),
    UF CHAR(2),
    CEP VARCHAR2(8),
    DDD VARCHAR2(2),
    TELEFONE VARCHAR2(9),
    SALARIO_BASE NUMBER(9,2) NOT NULL,
    TAXA_COMISSAO NUMBER(5,2)
);

-- Criação da tabela PEDIDO
CREATE TABLE PEDIDO (
    NUMERO VARCHAR2(20) NOT NULL PRIMARY KEY,
    DATA_EMISSAO DATE NOT NULL,
    VALOR NUMBER(9,2) NOT NULL,
    CPF_CLIENTE VARCHAR2(11) NOT NULL,
    CPF_VENDEDOR VARCHAR2(11) NOT NULL,
    CONSTRAINT FK_PEDIDO_CLIENTE FOREIGN KEY (CPF_CLIENTE) REFERENCES CLIENTE(CPF),
    CONSTRAINT FK_PEDIDO_VENDEDOR FOREIGN KEY (CPF_VENDEDOR) REFERENCES VENDEDOR(CPF)
);

drop table produto;

-- Criação da tabela PRODUTO
CREATE TABLE PRODUTO (
    CODIGO NUMBER(6) NOT NULL PRIMARY KEY,
    NOME VARCHAR(100) NOT NULL,
    PRECO NUMBER(9,2) NOT NULL,
    QTDE_ESTOQUE NUMBER(9) NOT NULL
);

CREATE TABLE ITEM_PEDIDO (
    CODIGO_PRODUTO NUMBER(6) NOT NULL,
    NUMERO_PEDIDO VARCHAR(20) NOT NULL,
    QTDE NUMBER(6) NOT NULL,
    
    CONSTRAINT FK_ITEM_PEDIDO_CODIGO FOREIGN KEY (CODIGO_PRODUTO) REFERENCES PRODUTO(CODIGO),
    
    CONSTRAINT FK_ITEM_PEDIDO_NUMERO FOREIGN KEY (NUMERO_PEDIDO) REFERENCES PEDIDO(NUMERO),
    
    CONSTRAINT PK_ITEM_PEDIDO_NUMCOD PRIMARY KEY (CODIGO_PRODUTO, NUMERO_PEDIDO)
);

INSERT INTO ITEM_PEDIDO (codigo_produto, numero_pedido, qtde)
VALUES (1, '2024001', 5);

INSERT INTO ITEM_PEDIDO (codigo_produto, numero_pedido, qtde)
VALUES (10, '2024001', 5);

INSERT INTO ITEM_PEDIDO (codigo_produto, numero_pedido, qtde)
VALUES (20, '2024001', 5);

INSERT INTO ITEM_PEDIDO (codigo_produto, numero_pedido, qtde)
VALUES (30, '2024001', 5);

-- Insert data into PRODUTO
INSERT INTO PRODUTO (CODIGO, NOME, PRECO, QTDE_ESTOQUE)
VALUES (1, 'PRODUTO 1', 45.50, 20);

INSERT INTO PRODUTO (CODIGO, NOME, PRECO, QTDE_ESTOQUE)
VALUES (10, 'PRODUTO 2', 6.50, 20);

INSERT INTO PRODUTO (CODIGO, NOME, PRECO, QTDE_ESTOQUE)
VALUES (20, 'PRODUTO 3', 15.80, 20);

INSERT INTO PRODUTO (CODIGO, NOME, PRECO, QTDE_ESTOQUE)
VALUES (30, 'PRODUTO 4', 0.55, 20);


-- Insert data into CLIENTE
INSERT INTO CLIENTE (CPF, NOME, ENDERECO, CIDADE, UF, CEP, DDD, TELEFONE, LIMITE_CREDITO, LIMITE_DISPONIVEL) 
VALUES ('1', 'João Silva', 'Rua A, 123', 'São Paulo', 'SP', '01001000', '11', '987654321', 5000.00, 2500.00);
INSERT INTO CLIENTE (CPF, NOME, ENDERECO, CIDADE, UF, CEP, DDD, TELEFONE, LIMITE_CREDITO, LIMITE_DISPONIVEL) 
VALUES ('2', 'Ana Pereira', 'Rua B, 456', 'Rio de Janeiro', 'RJ', '20040000', '21', '912345678', 3000.00, 1000.00);
INSERT INTO CLIENTE (CPF, NOME, ENDERECO, CIDADE, UF, CEP, DDD, TELEFONE, LIMITE_CREDITO, LIMITE_DISPONIVEL) 
VALUES ('34567890123', 'Carlos Souza', 'Avenida C, 789', 'Belo Horizonte', 'MG', '30120000', '31', '998765432', 4500.00, 1500.00);
INSERT INTO CLIENTE (CPF, NOME, ENDERECO, CIDADE, UF, CEP, DDD, TELEFONE, LIMITE_CREDITO, LIMITE_DISPONIVEL) 
VALUES ('45678901234', 'Mariana Costa', 'Praça D, 101', 'Curitiba', 'PR', '80010000', '41', '987654320', 6000.00, 3500.00);
INSERT INTO CLIENTE (CPF, NOME, ENDERECO, CIDADE, UF, CEP, DDD, TELEFONE, LIMITE_CREDITO, LIMITE_DISPONIVEL) 
VALUES ('56789012345', 'Bruno Lima', 'Travessa E, 202', 'Porto Alegre', 'RS', '90040000', '51', '987654321', 4000.00, 2500.00);

-- Insert data into VENDEDOR
INSERT INTO VENDEDOR (CPF, NOME, ENDERECO, CIDADE, UF, CEP, DDD, TELEFONE, SALARIO_BASE, TAXA_COMISSAO) 
VALUES ('1', 'Maria Oliveira', 'Avenida B, 456', 'Rio de Janeiro', 'RJ', '20040000', '21', '912345678', 2000.00, 5.00);
INSERT INTO VENDEDOR (CPF, NOME, ENDERECO, CIDADE, UF, CEP, DDD, TELEFONE, SALARIO_BASE, TAXA_COMISSAO) 
VALUES ('2', 'Pedro Santos', 'Rua F, 303', 'Salvador', 'BA', '40050000', '71', '987654321', 2500.00, 7.00);
INSERT INTO VENDEDOR (CPF, NOME, ENDERECO, CIDADE, UF, CEP, DDD, TELEFONE, SALARIO_BASE, TAXA_COMISSAO) 
VALUES ('32109876543', 'Luciana Dias', 'Alameda G, 404', 'Fortaleza', 'CE', '60030000', '85', '987654321', 3000.00, 6.00);
INSERT INTO VENDEDOR (CPF, NOME, ENDERECO, CIDADE, UF, CEP, DDD, TELEFONE, SALARIO_BASE, TAXA_COMISSAO) 
VALUES ('43210987654', 'Fernando Almeida', 'Largo H, 505', 'Recife', 'PE', '50070000', '81', '987654321', 2200.00, 4.50);
INSERT INTO VENDEDOR (CPF, NOME, ENDERECO, CIDADE, UF, CEP, DDD, TELEFONE, SALARIO_BASE, TAXA_COMISSAO) 
VALUES ('54321098765', 'Patricia Melo', 'Estrada I, 606', 'Manaus', 'AM', '69020000', '92', '987654321', 2800.00, 5.50);

-- Insert data into PEDIDO
INSERT INTO PEDIDO (NUMERO, DATA_EMISSAO, VALOR, CPF_CLIENTE, CPF_VENDEDOR) 
VALUES ('2024001', TO_DATE('2024-06-14', 'YYYY-MM-DD'), 1500.00, '12345678901', '10987654321');
INSERT INTO PEDIDO (NUMERO, DATA_EMISSAO, VALOR, CPF_CLIENTE, CPF_VENDEDOR) 
VALUES ('2024002', TO_DATE('2024-06-15', 'YYYY-MM-DD'), 2000.00, '23456789012', '21098765432');
INSERT INTO PEDIDO (NUMERO, DATA_EMISSAO, VALOR, CPF_CLIENTE, CPF_VENDEDOR) 
VALUES ('2024003', TO_DATE('2024-06-16', 'YYYY-MM-DD'), 2500.00, '34567890123', '32109876543');
INSERT INTO PEDIDO (NUMERO, DATA_EMISSAO, VALOR, CPF_CLIENTE, CPF_VENDEDOR) 
VALUES ('2024004', TO_DATE('2024-06-17', 'YYYY-MM-DD'), 3000.00, '45678901234', '43210987654');
INSERT INTO PEDIDO (NUMERO, DATA_EMISSAO, VALOR, CPF_CLIENTE, CPF_VENDEDOR) 
VALUES ('2024005', TO_DATE('2024-06-18', 'YYYY-MM-DD'), 1800.00, '56789012345', '54321098765');
INSERT INTO PEDIDO (NUMERO, DATA_EMISSAO, VALOR, CPF_CLIENTE, CPF_VENDEDOR) 
VALUES ('2024006', TO_DATE('2024-06-19', 'YYYY-MM-DD'), 2200.00, '12345678901', '21098765432');
INSERT INTO PEDIDO (NUMERO, DATA_EMISSAO, VALOR, CPF_CLIENTE, CPF_VENDEDOR) 
VALUES ('2024007', TO_DATE('2024-06-20', 'YYYY-MM-DD'), 2700.00, '23456789012', '32109876543');
INSERT INTO PEDIDO (NUMERO, DATA_EMISSAO, VALOR, CPF_CLIENTE, CPF_VENDEDOR) 
VALUES ('2024008', TO_DATE('2024-06-21', 'YYYY-MM-DD'), 3500.00, '34567890123', '43210987654');
INSERT INTO PEDIDO (NUMERO, DATA_EMISSAO, VALOR, CPF_CLIENTE, CPF_VENDEDOR) 
VALUES ('2024009', TO_DATE('2024-06-22', 'YYYY-MM-DD'), 4000.00, '45678901234', '54321098765');
INSERT INTO PEDIDO (NUMERO, DATA_EMISSAO, VALOR, CPF_CLIENTE, CPF_VENDEDOR) 
VALUES ('2024010', TO_DATE('2024-06-23', 'YYYY-MM-DD'), 1900.00, '56789012345', '10987654321');

SELECT * from cliente where cpf = '12345678901';
SELECT * from vendedor;
SELECT * FROM PEDIDO;

delete pedido;

SELECT * FROM Produto;
select * from pedido;

SELECT * FROM ITEM_PEDIDO WHERE NUMERO_PEDIDO = '1';

commit;
